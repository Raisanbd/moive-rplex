<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="theme-color" content="#0f172a">
<title>Raisan live</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
 
    <script
  type="text/javascript"
  src="//pl28235904.effectivegatecpm.com/4d/fe/4e/4dfe4eb2668ece83e72384a8bcf3e163.js"
></script>

<style>
    :root {
        --primary: #ed3b0e;
        --secondary: #f0e118;
        --bg-dark: #121829;
        --card-bg: rgba(30, 41, 59, 0.7);
        --text: #e2e8f0;
        --red: #ef4444;
        --green: #10b981;
    }

    * { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }
    body { 
        margin: 0; padding: 0; 
        background-color: var(--bg-dark); 
        background-image: radial-gradient(circle at 10% 20%, rgba(0, 242, 255, 0.05) 0%, transparent 20%);
        font-family: 'Poppins', sans-serif; 
        color: var(--text); 
    }
    
    .app-container { max-width: 900px; margin: 0 auto; padding: 15px; padding-bottom: 80px; }

    /* HEADER */
    .header { 
        display: flex; justify-content: space-between; align-items: center; 
        padding: 10px 0; margin-bottom: 10px; border-bottom: 1px solid rgba(255,255,255,0.05);
    }
    .logo { 
        font-size: 20px; font-weight: 700; 
        background: linear-gradient(90deg, var(--primary), #fff); 
        -webkit-background-clip: text; -webkit-text-fill-color: transparent; 
    }
    .live-badge { 
        font-size: 10px; background: rgba(239, 68, 68, 0.15); 
        color: var(--red); padding: 4px 8px; border: 1px solid rgba(239, 68, 68, 0.3);
        border-radius: 20px; font-weight: bold; animation: pulse 2s infinite; 
    }

    /* PLAYER */
    .player-wrapper { 
        position: relative; width: 100%; aspect-ratio: 16/9; 
        background: #000; border-radius: 12px; overflow: hidden; 
        box-shadow: 0 10px 30px -5px rgba(0, 0, 0, 0.5); 
        margin-bottom: 15px; border: 1px solid rgba(255,255,255,0.08);
    }
    video, iframe { width: 100%; height: 100%; object-fit: contain; }
    iframe { position: absolute; top: 0; left: 0; border: none; }

    /* CONTROLS (Buttons & Links) */
    .btn-group { 
        display: flex; gap: 8px; margin-bottom: 15px; 
        overflow-x: auto; padding-bottom: 5px; scrollbar-width: none;
    }
    .btn-group::-webkit-scrollbar { display: none; }

    /* Updated to support <a> tags looking like buttons */
    .ctrl-btn { 
        flex: 1; min-width: 80px;
        background: var(--card-bg); border: 1px solid rgba(255,255,255,0.1); 
        color: #ccc; padding: 10px; border-radius: 8px; font-size: 11px; 
        cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 6px; 
        transition: 0.2s; white-space: nowrap; backdrop-filter: blur(5px);
        font-weight: 500; text-decoration: none; /* Remove underline for links */
    }
    .ctrl-btn:active { transform: scale(0.96); }
    .ctrl-btn.active { background: rgba(0, 242, 255, 0.15); border-color: var(--primary); color: #fff; }
    .ctrl-btn:hover { background: rgba(255,255,255,0.1); color: #fff; }

    /* --- HOT MATCHES --- */
    .section-title { font-size: 13px; font-weight: 700; margin-bottom: 10px; color: #fff; display: flex; align-items: center; gap: 6px; }
    .hot-scroll { 
        display: flex; gap: 10px; overflow-x: auto; padding-bottom: 10px; 
        margin-bottom: 15px; scrollbar-width: none; 
    }
    .match-card { 
        min-width: 180px; height: 100px; 
        background-size: cover; background-position: center; 
        border-radius: 10px; position: relative; overflow: hidden; 
        cursor: pointer; border: 1px solid rgba(255,255,255,0.1);
    }
    .match-overlay {
        position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        background: linear-gradient(to top, rgba(0,0,0,0.9), rgba(0,0,0,0.2));
        padding: 8px; display: flex; flex-direction: column; justify-content: space-between;
    }
    .match-time { 
        align-self: flex-end; font-size: 9px; background: rgba(0,0,0,0.6); 
        padding: 2px 6px; border-radius: 4px; color: #fff;
    }
    .match-time.is-live { background: var(--red); animation: pulse 1s infinite; }
    .match-teams { font-size: 11px; font-weight: 600; color: #fff; line-height: 1.3; }

    /* SEARCH */
    .search-box { 
        width: 100%; padding: 12px 15px; border-radius: 10px; 
        border: 1px solid rgba(255,255,255,0.1); background: rgba(0,0,0,0.3); 
        color: #fff; font-size: 13px; margin-bottom: 15px;
    }
    .search-box:focus { border-color: var(--primary); background: rgba(0,0,0,0.5); }

    /* GRID */
    .grid-container { max-height: 450px; overflow-y: auto; padding-right: 2px; }
    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(90px, 1fr)); gap: 8px; }
    
    .card { 
        background: var(--card-bg); border-radius: 10px; padding: 10px; 
        text-align: center; cursor: pointer; position: relative; 
        border: 1px solid rgba(255,255,255,0.05); transition: 0.2s;
        display: flex; flex-direction: column; align-items: center; gap: 6px;
    }
    .card.active { border-color: var(--primary); background: rgba(0, 242, 255, 0.1); }
    .card img { width: 40px; height: 40px; object-fit: contain; }
    .card-title { font-size: 10px; color: #ccc; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }

    .fav-icon { position: absolute; top: 5px; right: 5px; font-size: 11px; color: rgba(255,255,255,0.1); }
    .fav-icon.is-fav { color: var(--red); }

    .toast { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%) translateY(20px); background: #333; color: #fff; padding: 8px 16px; border-radius: 20px; font-size: 11px; opacity: 0; transition: 0.3s; pointer-events: none; z-index: 100; border: 1px solid rgba(255,255,255,0.2); }
    .toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }

    @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.6; } 100% { opacity: 1; } }
</style>
</head>
<body>

<div class="app-container">
    <div class="header">
        <div class="logo"><i class="fas fa-play-circle" style="color:var(--primary)"></i> IPTV ✘ 2.0</div>
        <div class="live-badge">● RAISAN LIVE</div>
    </div>

    <div class="player-wrapper">
        <video id="videoPlayer" controls autoplay playsinline poster="https://i.postimg.cc/7hJHsJN1/Picsart-25-12-08-15-06-28-540-(2).png"></video>
        <iframe id="iframePlayer" style="display:none;" allowfullscreen allow="encrypted-media; autoplay"></iframe>
    </div>

    <div class="btn-group">
        <a href="https://t.me/your_channel" target="_blank" class="ctrl-btn">
            <i class="fas fa-compress-arrows-alt"></i> Tele
        </a>
        <a href="https://yourwebsite.com" target="_blank" class="ctrl-btn">
            <i class="fas fa-expand"></i> Live Tv -01
        </a>
        <a href="https://facebook.com" target="_blank" class="ctrl-btn">
            <i class="fas fa-heart"></i> Live Tv -02
        </a>
        <button class="ctrl-btn" onclick="reportIssue()" style="color:var(--red); border-color:rgba(239,68,68,0.3);">
            <i class="fa-brands fa-telegram"></i> Telegram
        </button>
    </div>

    <div class="section-title"><i class="fas fa-bullseye" style="color:var(--red)"></i> Live Events</div>
    <div id="hotMatchesContainer" class="hot-scroll"></div>

    <div class="section-title"><i class="fas fa-list-ul" style="color:var(--primary)"></i> PLAYLISTS</div>
    <div class="btn-group">
        <button class="ctrl-btn active" onclick="loadSourceType('static', this)">
            <i class="fas fa-home"></i> Home
        </button>
        <button class="ctrl-btn" onclick="loadSourceType('m3u1', this)">
            <i class="fas fa-server"></i> Playlist 1
        </button>
        <button class="ctrl-btn" onclick="loadSourceType('m3u2', this)">
            <i class="fas fa-server"></i> Playlist 2
        </button>
        <button class="ctrl-btn" onclick="loadSourceType('m3u3', this)">
            <i class="fas fa-server"></i> Playlist 3
        </button>
    </div>

    <input type="text" id="searchInput" class="search-box" placeholder="Search channels...">

    <div class="grid-container">
        <div id="channelGrid" class="grid"></div>
    </div>

   

    <div id="toast" class="toast">Action Successful</div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mux.js/6.3.0/mux.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.3.6/shaka-player.compiled.js"></script>
<script src="https://cdn.jsdelivr.net/npm/hls.js@1"></script>

<script>
    // ================= CONFIGURATION =================
    // isEmbed: true দিলে Iframe প্লেয়ারে চলবে
    // isEmbed: false দিলে Video প্লেয়ারে চলবে
    
    const PLAYLIST_CONFIG = {
        m3u1: {
            url: "https://m3u.ch/pl/59b4083c6743cc8ccdca0f2429fe4cef_e662be891ca7b32621a686fff1ebb269.m3u",
            isEmbed: true 
        },
        m3u2: {
            url: "https://raw.githubusercontent.com/unosottor/UnosottorTV/main/playlist.m3u",
            isEmbed: false 
        },
        m3u3: {
            url: "https://m3u.ch/pl/bfc681d95966cc09ccb3ed4afe996352_dbaec809b5a2afe1dbe25ea19a664e8c.m3u",
            isEmbed: false
        }
    };

    const hotMatches = [
        { team1: "India", team2: "South Africa", info: "T20 Match", matchTime: "2025-12-09T19:30:00", channelName: "T Sports", bg: "https://img.freepik.com/free-vector/cricket-stadium-background_1017-23979.jpg" },
        { team1: "Bayern", team2: "Sporting", info: "UCL", matchTime: "2025-12-09T23:45:00", channelName: "Ten 2", bg: "https://t3.ftcdn.net/jpg/02/86/76/78/360_F_286767855_p12F2bJ7qXg6qe8q0k6k8q0k6k8q0k6.jpg" },
        { team1: "Bayern", team2: "Sporting", info: "UCL", matchTime: "2025-12-09T23:45:00", channelName: "Ten 2", bg: "https://t3.ftcdn.net/jpg/02/86/76/78/360_F_286767855_p12F2bJ7qXg6qe8q0k6k8q0k6k8q0k6.jpg" },
        { team1: "Bayern", team2: "Sporting", info: "UCL", matchTime: "2025-12-09T23:45:00", channelName: "Somoy TV", bg: "https://t3.ftcdn.net/jpg/02/86/76/78/360_F_286767855_p12F2bJ7qXg6qe8q0k6k8q0k6k8q0k6.jpg" }
        
    ];

    // Static Channels
    const staticChannels = [
        { name: "Ten Cricket", logo: "https://i.postimg.cc/fWV00yP8/20250529_123315.png", sources: [{ label: "Server 1", url: "https://bongoflixbd.top/?watch=212f6ccc690a978b72b758522a82d9b4", isEmbed: true }] },
        { name: "T Sports", logo: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjf3p9HPXP_bNJMfPGfED_Ba3ovjtCy_9MazCyycegeJZKMnD6kYhM0t3LUMw7vnzmK38hB9MqTPqz6y6A-zCfEBzBvU7sY9HTHH8BVb_1NBNBraJDtvDBCk-V7XBlSKcfhypl2r53JQmQ/s16000-rw/T-Sports-Bangladesh-Logo.png", sources: [{ label: "HD", url: "https://tvsen1.aynaott.com/YNMn5kZz8aLm/index.m3u8" }] },
        { name: "Somoy TV", logo: "https://www.somoynews.tv/icon.png", sources: [{ label: "Live", url: "https://owrcovcrpy.gpcdn.net/bpk-tv/1702/output/index.m3u8" }] },
        { name: "Gazi TV", logo: "https://upload.wikimedia.org/wikipedia/en/9/9e/Gazi_TV_logo.png", sources: [{ label: "HD", url: "http://172.17.50.112:84/ant1008/tracks-v1a1/mono.m3u8" }] },
        {
    name: "Star Sports Select 2",
    logo: "https://i.postimg.cc/DzvFX06y/20251002_225947.png",
    sources: [
        {
            label: "HD (HLS)",
            url: "https://bongoflixbd.top/?watch=7482ed5e9c4da0cc7de6aa27dc16c4c4",
            isEmbed: true
        }
    ]
},
{
    name: "Ten 1",
    logo: "https://i.postimg.cc/cH2Cc7zX/20250529_122631.png",
    sources: [
        {
            label: "HD (HLS)",
            url: "https://pixeldrain.dev/api/file/2Dto1LLg?download",
            isEmbed: false
        }
    ]
},
{
    name: "Ten 2",
    logo: "https://i.postimg.cc/x12k7R1Z/20250529_122855.png",
    sources: [
        {
            label: "HD (HLS)",
            url: "https://bongoflixbd.top/?watch=6f8378e796d7f7cff65333fd3b1d0974",
            isEmbed: true
        }
    ]
},
{
    name: "Ten 3",
    logo: "https://i.postimg.cc/vH9g3jb9/20250529_123011.png",
    sources: [
        {
            label: "HD (HLS)",
            url: "https://bongoflixbd.top/?watch=0bd594d32d6dc8cee0165bc175eeb862",
            isEmbed: true
        }
    ]
},
{
    name: "Ten 5",
    logo: "https://i.postimg.cc/kMLRN93q/20250529_123147.png",
    sources: [
        {
            label: "HD (HLS)",
            url: "https://bongoflixbd.top/?watch=0940a354e290cbf71e9d5d21e2883258",
            isEmbed: true
        }
    ]
},
 {
                name: "Premier Sports 1",
                logo: "https://iili.io/KWnBoiB.png",
                sources: [
                    { 
                        label: "HD (DASH)", 
                        url: "https://abizzcbaaaaaaaamlniubkrls2bb7.otte.live.cf.ww.aiv-cdn.net/fra-nitro/live/dash/enc/vwq77hfgzw/out/v1/b858e0b845c64cec953887bd4269e4ea/cenc.mpd",
                        drm: { "1444f4235529f183f0a5a486befe9cdb": "e5e3fec67a1bb3472a2089c8a0a2557f" }
                    }
                ]
            },
            {
                name: "WWE HD",
                logo: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ1CLvFQlH72RrIbEgS5AcM-mf_owdM8HXCmz0O2jRMvvRKS8TMR1Rbg4g&s=10",
                sources: [
                    {
                        label: "HD (DASH)",
                        url: "https://cors-everywhere-wc8b4.ondigitalocean.app/https://fsly.stream.peacocktv.com/Content/CMAF_CTR-4s/Live/channel(vc106wh3yw)/master.mpd",
                        drm: { "00208c93f4358213b52220898b962385": "8ae6063167228e350dd132d4a1573102" }
                    }
                ]
            },
            {
                name: "Willow Cricket",
                logo: "https://i.postimg.cc/qgfrNjFH/20250529_123654.png",
                sources: [
                    {
                        label: "HD (DASH)",
                        url: "https://a170aivottlinear-a.akamaihd.net:443/OTTB/bom-nitro/live/dash/enc/f60kqesunw/out/v1/a435ed7a00f947deb4369b46d8f2fb70/cenc.mpd",
                        drm: { "1779C27B9D077A3BA0C9CC1BB9A94B9F": "CC5CF3B7928FB9E0A1EE6A8B566F0A8E" }
                    }
                ]
            },
            {
                name: "TNT Sports 1",
                logo: "https://iili.io/3DPQBC7.png",
                sources: [
                    {
                        label: "HD (DASH)",
                        url: "https://ottb.live.cf.ww.aiv-cdn.net/lhr-nitro/live/dash/enc/wf8usag51e/out/v1/bd3b0c314fff4bb1ab4693358f3cd2d3/cenc.mpd",
                        drm: { "d0f2e5c39e70c18f29bf77768a1ad89a": "d6853c51fcf37a18905f0609972395d7" }
                    }
                ]
            },
            {
                name: "TNT Sports 2",
                logo: "https://iili.io/3OKhGKg.png",
                sources: [
                    {
                        label: "HD (DASH)",
                        url: "https://ottb.live.cf.ww.aiv-cdn.net/lhr-nitro/live/dash/enc/f0qvkrra8j/out/v1/f8fa17f087564f51aa4d5c700be43ec4/cenc.mpd",
                        drm: { "9f51f3dc6313ac8bc668e2d9d1c04dfa": "74bc63e5a193454a91ca494975db33f9" }
                    }
                ]
            },
            {
                name: "TNT Sports 3",
                logo: "https://iili.io/3DPQCG9.png",
                sources: [
                    {
                        label: "HD (DASH)",
                        url: "https://ottb.live.cf.ww.aiv-cdn.net/lhr-nitro/live/dash/enc/lsdasbvglv/out/v1/bb548a3626cd4708afbb94a58d71dce9/cenc.mpd",
                        drm: { "a93c1cbfdccd23233bac13540c693e7f": "2f6ab2e6693eb847eff3c9da8f9d01fc" }
                    }
                ]
            },
            {
                name: "TNT Sports 4",
                logo: "https://iili.io/3DPQfQS.png",
                sources: [
                    {
                        label: "HD (DASH)",
                        url: "https://ottb.live.cf.ww.aiv-cdn.net/lhr-nitro/live/dash/enc/i2pcjr4pe5/out/v1/912e9db56d75403b8a9ac0a719110f36/cenc.mpd",
                        drm: {
                            "192b1115da041585c77200128549efa1": "634e10efe4abbb14be400a3ccbac0258"
                        }
                    }
                ]
            },
            {
                name: "Ten Cricket Peo",
                logo: "https://img-cdn.publive.online/fit-in/640x430/filters:format(webp)/afaqs/media/post_attachments/84882a51b6c9326e4499dedbb089ca95bd82663084027217207edb964a9a89ad.jpg",
                sources: [
                    {
                        label: "HD (DASH)",
                        url: "https://edge4-moblive.yuppcdn.net/drm2/smil:tencricketdrm1.smil/manifest.mpd",
                        drm: {
                            "9872e439f21f4a299cab249c6554daa3": "0cdfcfe0d0f1fbe100554ce3ef4c4665"
                        }
                    }
                ]
            },
            {
                name: "Cricket Gold New",
                logo: "https://i.ytimg.com/vi/CeAgx48qQ3M/maxresdefault.jpg",
                sources: [
                    {
                        label: "HD (HLS)",
                        url: "https://cc-bpss9asqfihqh.akamaized.net/v1/master/3722c60a815c199d9c0ef36c5b73da68a62b09d1/cc-bpss9asqfihqh/scheduler/scheduleMaster/453.m3u8"
                    }
                ]
            },
            {
                name: "Cricket Gold Old",
                logo: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTXj3nUdWfOIC7pHLCa-AbYGrnZemlUk8AbOTxXHSJtRRbRZTLWP77saldJgNA&s",
                sources: [
                    {
                        label: "HD (HLS)",
                        url: "https://dltcbyrjz4q6b.cloudfront.net/scheduler/scheduleMaster/418.m3u8"
                    }
                ]
            },
            {
                name: "PEO SPORTS 1 SD",
                logo: "https://www.slt.lk/sites/default/files/channel_images/150-PEO%20SPORTS%201.png",
                sources: [
                    {
                        label: "HD (DASH)",
                        url: "https://edge4-moblive.yuppcdn.net/drm/smil:peosports1drm.smil/manifest.mpd",
                        drm: {
                            "9872e439f21f4a299cab249c6554daa3": "0cdfcfe0d0f1fbe100554ce3ef4c4665"
                        }
                    }
                ]
            },
            {
                name: "PEO SPORTS 2 SD",
                logo: "https://www.slt.lk/sites/default/files/channel_images/151-PEO%20Sports2_0.jpg",
                sources: [
                    {
                        label: "HD (DASH)",
                        url: "https://edge4-moblive.yuppcdn.net/drm1/smil:peosports2drm.smil/manifest.mpd",
                        drm: {
                            "9872e439f21f4a299cab249c6554daa3": "0cdfcfe0d0f1fbe100554ce3ef4c4665"
                        }
                    }
                ]
            },
            {
                name: "PEO SPORTS 3 SD",
                logo: "https://www.slt.lk/sites/default/files/channel_images/152-PEO%20SPORTS%203_0.png",
                sources: [
                    {
                        label: "HD (DASH)",
                        url: "https://edge4-moblive.yuppcdn.net/drm1/smil:peosports3drm.smil/manifest.mpd",
                        drm: {
                            "9872e439f21f4a299cab249c6554daa3": "0cdfcfe0d0f1fbe100554ce3ef4c4665"
                        }
                    }
                ]
            },
            {
                name: "Sky Sports NZ 4K",
                logo: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQJ9z-5YyWXgoLa8l-pwJ2LXgGH8itbPBDYpMMTL6HW&s=10",
                sources: [
                    {
                        label: "4K (DASH)",
                        url: "https://dice-live-oc.akamaized.net/hdntl=exp=1764979214~acl=%2f*~id=6b8d0cb1-d519-4164-8980-b840e5184dbb~data=hdntl,dWlkPTU3MjQwMXxkY2Uuc2t5bnomaXA9MTIyLjU5LjI3LjIzOCZleHA9MTc2NDk3OTI0MyZlaWQ9MjE5MDI2JmNpZD1kY2Uuc2t5bnomb2lkPTMxOCZ0eXBlPUxJVkU~hmac=d2028373810fe1b534c7e5d054c7bdc783ad3bab89d395a31aba09caa0394aa1/dash/live/2093671/294921-311597/manifest-d.mpd",
                        drm: {
                            "aefc2c8d1c8840f1b6981f856c9269ba": "cf8ea114c45b4d6596b2748258ab74d6"
                        }
                    }
                ]
            },
            {
                name: "Premier Sports 2",
                logo: "https://iili.io/KWnCF1I.png",
                sources: [
                    { 
                        label: "HD (DASH)", 
                        url: "https://abizzcbaaaaaaaaml3dau5ew7oiof.otte.live.cf.ww.aiv-cdn.net/fra-nitro/live/dash/enc/w34nznx0bz/out/v1/1c6639b9af994c75847def2249302066/cenc.mpd",
                        drm: {
                            "1a5df53609ebc9857898c490f4724918": "77f62980d582ec541280796acf8b2d19"
                        }
                    }
                ]
            },
            {
                name: "Prime TV",
                logo: "https://iili.io/FfrCHqN.png",
                sources: [
                    { 
                        label: "HD (DASH)", 
                        url: "https://cors-proxy.rdpsell01.workers.dev/https://ottb.live.cf.ww.aiv-cdn.net/lhr-nitro/live/dash/enc/lqj6tdomna/out/v1/817aa485206f4456ad594bbf61c1016c/cenc.mpd",
                        drm: {
                            "680a24e3d3785ea8b3a33a56928ea128": "3f07a7f94f0ac7ee96057224b6a4163d"
                        }
                    }
                ]
            },
            {
                name: "Fox Sports 1",
                logo: "https://iili.io/KYJqv0G.png",
                sources: [
                    { 
                        label: "HD (DASH)", 
                        url: "https://cors-proxy.rdpsell01.workers.dev/https://ottb.live.cf.ww.aiv-cdn.net/lhr-nitro/live/clients/dash/enc/fsu3wl2rwb/out/v1/be61206c04e643349d53fb22301f3b50/cenc.mpd",
                        drm: {
                            "5466ebd70704bdeb657f0abf3c5ca4ef": "bdd79b72d8e48ed483aa623cc38a8a16"
                        }
                    }
                ]
            },
            {
                name: "Somoy TV (HLS Test)",
                logo: "https://i.imgur.com/Myf82w3.png",
                sources: [
                    { label: "Live", url: "https://live-cdn.somoynews.tv/hls/stream_720p/index.m3u8" }
                ]
            },
            {
                name: "T Sports",
                logo: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjf3p9HPXP_bNJMfPGfED_Ba3ovjtCy_9MazCyycegeJZKMnD6kYhM0t3LUMw7vnzmK38hB9MqTPqz6y6A-zCfEBzBvU7sY9HTHH8BVb_1NBNBraJDtvDBCk-V7XBlSKcfhypl2r53JQmQ/s16000-rw/T-Sports-Bangladesh-Logo.png",
                sources: [
                    { label: "Server 1 (HD)", url: "https://tvsen1.aynaott.com/YNMn5kZz8aLm/index.m3u8" },
                    { label: "Server 2 (Backup)", url: "https://padmaonline.duckdns.org:8088/T-Sport/tracks-v1a1/mono.m3u8" }
                ]
            },
            {
                name: "Fox Sports English",
                logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/0/0c/FOX_Sports_logo.svg/1200px-FOX_Sports_logo.svg.png",
                sources: [
                    { label: "Main Server", url: "https://d1jzu95oc8fgt3.cloudfront.net:443/FOX_Sports.m3u8" }
                ]
            },
            {
                name: "Al Jazeera",
                logo: "https://upload.wikimedia.org/wikipedia/en/thumb/f/f2/Al_Jazeera_English.svg/1200px-Al_Jazeera_English.svg.png",
                sources: [
                    { label: "1080p", url: "https://cors-everywhere-wc8b4.ondigitalocean.app/http://175.107.244.52:4456/play/a06z" },
                    { label: "Low Data", url: "https://live-hls-web-aje.getaj.net/AJE/01.m3u8" }
                ]
            },
            {
                name: "Cricket Gold",
                logo: "https://i.ytimg.com/vi/CeAgx48qQ3M/maxresdefault.jpg",
                sources: [
                    { label: "New", url: "https://cc-bpss9asqfihqh.akamaized.net/v1/master/3722c60a815c199d9c0ef36c5b73da68a62b09d1/cc-bpss9asqfihqh/scheduler/scheduleMaster/453.m3u8" },
                    { label: "OLD", url: "https://dltcbyrjz4q6b.cloudfront.net/scheduler/scheduleMaster/418.m3u8" }
                ]
            },
            {
                name: "Tata Play",
                logo: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg6faXzWBvr9VdrR55j7eaAHqoPInmrgKj8NPSzUokZBb65DjCKid5Rk81sTJs1O33iFEM2p1ecyzqf3JoPtHihHotYuUwVaqR6tXeCyDU7HDQbE_s3OmSwhOe-JpII11hi8j4ObAsB9HyyKfBlaEPgze1o6lgpjb7iiXMBYfvQb1MbkdV0DCYCuZlglb23/s1600/channels4_profile.jpg",
                sources: [
                    { label: "Auto", url: "https://tplay.live/originals/deewana/index.m3u8" }
                ]
            },
            {
                name: "Jio HotStar",
                logo: "https://www.livemint.com/lm-img/img/2025/02/14/1600x900/Screenshot_2025-02-14_065533_1739496378365_1739496385668.png",
                sources: [
                    { label: "Server 1 (HD)", url: "https://live-en.aisports.cc/moviebox/device01/playlist.m3u8" }
                ]
            },{
    name: "Sky Sports NZ 1",
    logo: "https://iili.io/KbJy77S.png",
    sources: [
        {
            label: "HD (DASH)",
            url: "https://dice-live-oc.akamaized.net/.../2093682/219026-311906/manifest-d.mpd",
            drm: {
                "aefc2c8d1c8840f1b6981f856c9269ba": "cf8ea114c45b4d6596b2748258ab74d6"
            }
        }
    ]
},
{
    name: "Sky Sports NZ 2",
    logo: "https://iili.io/Kbd3hYv.png",
    sources: [
        {
            label: "HD (DASH)",
            url: "https://dice-live-oc.akamaized.net/.../2093681/219027-311905/manifest-d.mpd",
            drm: {
                "708a98b352bd4418a73a028edd84da8f": "b1fa5c2bca4c4b57b924b748564532cb"
            }
        }
    ]
},
{
    name: "Sky Sports NZ 3",
    logo: "https://iili.io/KbJoon2.png",
    sources: [
        {
            label: "HD (DASH)",
            url: "https://dice-live-oc.akamaized.net/.../2093680/219028-311904/manifest-d.mpd",
            drm: {
                "2e2636daa74141b68cc14882ea3ff82b": "0961f48287324adbb4b7ff3c9d82b3c9"
            }
        }
    ]
},
{
    name: "Sky Sports NZ 4",
    logo: "https://iili.io/KbdFtNp.png",
    sources: [
        {
            label: "HD (DASH)",
            url: "https://dice-live-oc.akamaized.net/.../2093679/219029-311903/manifest-d.mpd",
            drm: {
                "278b8746b7c7410e901af0aa3774f037": "15e1142d647b474ebbd49e41efa2a9d7"
            }
        }
    ]
},
{
    name: "Sky Sports NZ 5",
    logo: "https://iili.io/KbdfMG9.png",
    sources: [
        {
            label: "HD (DASH)",
            url: "https://dice-live-oc.akamaized.net/.../2093678/219032-311902/manifest-d.mpd",
            drm: {
                "fdd24dd2c6c14126ad7c1ad1066b03dd": "08289c6d57d54e8d8dca55e1862afb82"
            }
        }
    ]
},
{
    name: "Sky Sports NZ 6",
    logo: "https://iili.io/KmU23ut.png",
    sources: [
        {
            label: "HD (DASH)",
            url: "https://dice-live-oc.akamaized.net/.../2093677/219033-311901/manifest-d.mpd",
            drm: {
                "e87521b3dfa44ed9ba004012dcb89172": "bba9734a9d724531bbab7ef5d64ca1f8"
            }
        }
    ]
},
        {
    name: "Star Sports Select 1",
    logo: "https://i.postimg.cc/50ykjF9d/20250702_032238.png",
    sources: [
        {
            label: "HD (HLS)",
            url: "https://bongoflixbd.top/?watch=b8966a010354b3b97eb8c050ea73460f",
            isEmbed: true
        }
    ]
},
    ];

    // ================= STATE =================
    let favorites = JSON.parse(localStorage.getItem('zapFavorites')) || [];
    let currentChannels = [...staticChannels]; 
    let activePlayer = null; 
    let shakaInstance = null;
    let hlsInstance = null;
    let currentChannelIdx = -1;

    // ================= DOM =================
    const video = document.getElementById('videoPlayer');
    const iframe = document.getElementById('iframePlayer');
    const grid = document.getElementById('channelGrid');
    const search = document.getElementById('searchInput');

    // ================= INIT =================
    function init() {
        shaka.polyfill.installAll();
        if(shaka.Player.isBrowserSupported()) shakaInstance = new shaka.Player(video);
        
        renderHotMatches();
        renderChannels(); 
        startCountdown();
        
        search.addEventListener('input', (e) => renderChannels(e.target.value));
    }

    // ================= PLAYLIST LOGIC =================
    async function loadSourceType(type, btn) {
        document.querySelectorAll('.section-title + .btn-group .ctrl-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        search.value = ""; 

        if (type === 'static') {
            currentChannels = [...staticChannels];
            renderChannels();
            showToast("Loaded Home Channels");
        } else {
            const config = PLAYLIST_CONFIG[type];
            if(config && config.url) {
                await fetchAndParseM3U(config.url, config.isEmbed);
            } else {
                showToast("Playlist not configured");
            }
        }
    }

    async function fetchAndParseM3U(url, forceEmbed = false) {
        grid.innerHTML = `<div style="grid-column:1/-1;text-align:center;padding:20px;color:#888;">Loading...</div>`;
        try {
            const response = await fetch(url);
            const text = await response.text();
            currentChannels = parseM3U(text, forceEmbed);
            renderChannels();
            showToast(`Loaded ${currentChannels.length} Channels`);
        } catch (error) {
            console.error(error);
            grid.innerHTML = `<div style="grid-column:1/-1;text-align:center;padding:20px;color:var(--red);">Failed to load</div>`;
        }
    }

    function parseM3U(data, forceEmbed) {
        const lines = data.split('\n');
        const playlist = [];
        let currentCh = {};
        
        for (let line of lines) {
            line = line.trim();
            if (line.startsWith('#EXTINF:')) {
                const logoMatch = line.match(/tvg-logo="([^"]*)"/);
                currentCh.logo = logoMatch ? logoMatch[1] : 'https://via.placeholder.com/50?text=TV';
                const nameParts = line.split(',');
                currentCh.name = nameParts[nameParts.length - 1].trim();
            } else if (line && !line.startsWith('#')) {
                currentCh.sources = [{ 
                    label: "Auto", 
                    url: line, 
                    isEmbed: forceEmbed 
                }];
                playlist.push(currentCh);
                currentCh = {};
            }
        }
        return playlist;
    }

    // ================= RENDERING =================
    function renderHotMatches() {
        const container = document.getElementById('hotMatchesContainer');
        container.innerHTML = "";
        hotMatches.forEach(match => {
            const div = document.createElement('div');
            div.className = 'match-card';
            div.style.backgroundImage = `url('${match.bg}')`;
            div.innerHTML = `
                <div class="match-overlay">
                    <div style="font-size:10px; color:var(--primary); font-weight:bold;">${match.info}</div>
                    <div class="match-teams">${match.team1} <br> vs <br> ${match.team2}</div>
                    <div class="match-time" data-time="${match.matchTime}">...</div>
                </div>
            `;
            div.onclick = () => {
                let targetIdx = currentChannels.findIndex(ch => ch.name.includes(match.channelName));
                if(targetIdx === -1) {
                     currentChannels = [...staticChannels];
                     targetIdx = currentChannels.findIndex(ch => ch.name.includes(match.channelName));
                }
                if(targetIdx !== -1) loadChannel(targetIdx);
                else showToast("Channel not found");
            };
            container.appendChild(div);
        });
    }

    function renderChannels(query = "") {
        grid.innerHTML = "";
        const filtered = currentChannels.filter(ch => ch.name.toLowerCase().includes(query.toLowerCase()));
        
        if(filtered.length === 0) {
            grid.innerHTML = `<div style="grid-column:1/-1;text-align:center;padding:20px;color:#666;">No channels found</div>`;
            return;
        }

        const fragment = document.createDocumentFragment();
        filtered.forEach(ch => {
            const idx = currentChannels.indexOf(ch);
            const isFav = favorites.includes(ch.name);
            const div = document.createElement('div');
            div.className = `card ${currentChannelIdx === idx ? 'active' : ''}`;
            div.onclick = (e) => {
                if(!e.target.classList.contains('fav-icon')) loadChannel(idx);
            };
            div.innerHTML = `
                <i class="fas fa-heart fav-icon ${isFav ? 'is-fav' : ''}" onclick="toggleFav('${ch.name}', this)"></i>
                <img src="${ch.logo}" loading="lazy" onerror="this.src='https://via.placeholder.com/45?text=TV'">
                <div class="card-title">${ch.name}</div>
            `;
            fragment.appendChild(div);
        });
        grid.appendChild(fragment);
    }

    // ================= PLAYER =================
    function loadChannel(idx) {
        currentChannelIdx = idx;
        const ch = currentChannels[idx];
        
        // UI Highlight
        renderChannels(search.value);
        
        // Auto Play First Source
        if(ch.sources && ch.sources.length > 0) {
            playSource(ch.sources[0]);
        }
        
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    async function playSource(src) {
        const url = src.url;
        const isEmbed = src.isEmbed || false;

        if(hlsInstance) { hlsInstance.destroy(); hlsInstance = null; }
        if(activePlayer === 'shaka') { await shakaInstance.unload(); }

        if (isEmbed) {
            video.style.display = 'none';
            video.pause();
            iframe.style.display = 'block';
            iframe.src = url;
        } else {
            iframe.style.display = 'none';
            iframe.src = "";
            video.style.display = 'block';
            
            const isMpd = url.includes('.mpd');
            const isHls = url.includes('.m3u8');

            try {
                if (isMpd) {
                    activePlayer = 'shaka';
                    shakaInstance.configure({ drm: { clearKeys: src.drm || {} } });
                    await shakaInstance.load(url);
                    video.play();
                } else if (isHls) {
                    if(Hls.isSupported()) {
                        hlsInstance = new Hls({ xhrSetup: xhr => { 
                            if(src.headers) for(let k in src.headers) xhr.setRequestHeader(k, src.headers[k]); 
                        }});
                        hlsInstance.loadSource(url);
                        hlsInstance.attachMedia(video);
                        hlsInstance.on(Hls.Events.MANIFEST_PARSED, () => video.play());
                    } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                        video.src = url;
                        video.play();
                    }
                } else {
                    video.src = url;
                    video.play();
                }
            } catch(e) {
                console.error("Stream Error", e);
            }
        }
    }

    function toggleFav(name, icon) {
        if(favorites.includes(name)) {
            favorites = favorites.filter(n => n !== name);
            if(icon) icon.classList.remove('is-fav');
            showToast("Removed");
        } else {
            favorites.push(name);
            if(icon) icon.classList.add('is-fav');
            showToast("Added to Favorites");
        }
        localStorage.setItem('zapFavorites', JSON.stringify(favorites));
    }

    function reportIssue() { window.open('https://t.me/rrplex', '_blank'); }

    function showToast(msg) {
        const t = document.getElementById('toast');
        t.innerText = msg;
        t.classList.add('show');
        setTimeout(() => t.classList.remove('show'), 2000);
    }

    function startCountdown() {
        setInterval(() => {
            const now = new Date().getTime();
            document.querySelectorAll('.match-time').forEach(b => {
                const diff = new Date(b.dataset.time).getTime() - now;
                if(diff <= 0) { b.innerText = "LIVE"; b.classList.add('is-live'); }
                else {
                    const h = Math.floor((diff % (1000*60*60*24)) / (1000*60*60));
                    const m = Math.floor((diff % (1000*60*60)) / (1000*60));
                    b.innerText = `${h}h ${m}m`;
                }
            });
        }, 1000);
    }

    document.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>
